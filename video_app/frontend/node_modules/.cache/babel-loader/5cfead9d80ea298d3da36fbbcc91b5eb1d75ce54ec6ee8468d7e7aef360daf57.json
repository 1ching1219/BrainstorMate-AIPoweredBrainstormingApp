{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\\\u684C\\u9762\\\\HCI+D\\\\video_app\\\\frontend\\\\src\\\\components\\\\VideoRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Peer from 'simple-peer';\nimport axios from 'axios';\nimport Chat from './Chat';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoRoomContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100%;\n  position: relative;\n`;\n_c = VideoRoomContainer;\nconst Header = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 12px 16px;\n  border-bottom: 1px solid #e0e0e0;\n`;\n_c2 = Header;\nconst RoomTitle = styled.h2`\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n`;\n_c3 = RoomTitle;\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n`;\n\n// AI Feedback Section\n_c4 = ContentContainer;\nconst FeedbackSection = styled.div`\n  height: 50%; /* Increased from 40% to 50% */\n  overflow-y: auto;\n  padding: 16px;\n  background-color: #fff;\n  border-bottom: 2px solid #2a70e0; // Added visible divider\n`;\n_c5 = FeedbackSection;\nconst FeedbackHeader = styled.h3`\n  margin: 0 0 16px 0;\n  font-size: 14px;\n  font-weight: 600;\n  color: #2a70e0;\n`;\n_c6 = FeedbackHeader;\nconst FeedbackItem = styled.div`\n  display: flex;\n  margin-bottom: 16px;\n`;\n_c7 = FeedbackItem;\nconst Avatar = styled.div`\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  background-color: #e0e0e0;\n  margin-right: 12px;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n_c8 = Avatar;\nconst AvatarImage = styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n`;\nconst FeedbackContent = styled.div`\n  flex: 1;\n`;\n_c9 = FeedbackContent;\nconst AgentName = styled.div`\n  font-weight: 600;\n  font-size: 14px;\n  margin-bottom: 4px;\n`;\n_c10 = AgentName;\nconst FeedbackText = styled.div`\n  font-size: 14px;\n`;\n\n// Human Video Section\n_c11 = FeedbackText;\nconst VideoSection = styled.div`\n  height: 50%; \n  background-color: #f5f5f5;\n  position: relative;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n`;\n_c12 = VideoSection;\nconst VideoGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr 1fr;\n  gap: 16px;\n  flex: 1;\n  position: relative;\n`;\n_c13 = VideoGrid;\nconst VideoContainer = styled.div`\n  position: relative;\n  aspect-ratio: 4/3;\n  background-color: #000;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n_c14 = VideoContainer;\nconst ParticipantVideo = styled.video`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n`;\n_c15 = ParticipantVideo;\nconst ParticipantName = styled.div`\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n  background-color: rgba(0, 0, 0, 0.6);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n`;\n\n// Navigation buttons for pagination\n_c16 = ParticipantName;\nconst PaginationControls = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 5px;\n`;\n_c17 = PaginationControls;\nconst PageButton = styled.button`\n  background-color: ${props => props.active ? '#2a70e0' : '#f0f0f0'};\n  color: ${props => props.active ? 'white' : '#333'};\n  border: none;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  margin: 0 5px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:hover {\n    background-color: ${props => props.active ? '#2a70e0' : '#d9d9d9'};\n  }\n`;\n_c18 = PageButton;\nconst NavButton = styled.button`\n  background-color: #f0f0f0;\n  border: none;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  margin: 0 5px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:hover {\n    background-color: #d9d9d9;\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\n// Self video container\n_c19 = NavButton;\nconst SelfVideoContainer = styled.div`\n  position: absolute;\n  bottom: 70px; // Position above control bar\n  right: 10px;\n  width: 180px; // Smaller size\n  border-radius: 8px;\n  overflow: hidden;\n  aspect-ratio: 4/3;\n  background-color: #000;\n  z-index: 10;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n  display: ${props => props.visible ? 'block' : 'none'}; // Hide when video is off\n`;\nconst ControlBar = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 16px;\n  background-color: #fff;\n  border-top: 1px solid #e0e0e0;\n`;\n_c20 = ControlBar;\nconst ControlButton = styled.button`\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  margin: 0 8px;\n  background-color: ${props => props.danger ? '#ff4d4f' : '#f0f0f0'};\n  color: ${props => props.danger ? 'white' : 'black'};\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    background-color: ${props => props.danger ? '#ff7875' : '#d9d9d9'};\n  }\n`;\n_c21 = ControlButton;\nconst ChatButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  background-color: #f0f0f0;\n  border: none;\n  cursor: pointer;\n  margin-right: 16px;\n  \n  &:hover {\n    background-color: #d9d9d9;\n  }\n`;\n_c22 = ChatButton;\nconst VideoRoom = () => {\n  _s();\n  var _location$state;\n  const {\n    roomId\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [aiPartners, setAiPartners] = useState(((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.aiPartners) || []);\n  const [userName, setUserName] = useState(localStorage.getItem('userName') || 'You');\n  const [peers, setPeers] = useState([]);\n  const [participants, setParticipants] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [aiFeedback, setAiFeedback] = useState([]);\n  const [showChat, setShowChat] = useState(false);\n  const [videoEnabled, setVideoEnabled] = useState(true);\n  const [audioEnabled, setAudioEnabled] = useState(true);\n\n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1);\n  const participantsPerPage = 4;\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  const socketRef = useRef();\n  const streamRef = useRef();\n\n  // Put current user first, then other participants\n  const humanParticipants = [{\n    id: userName,\n    isCurrentUser: true\n  }, ...peers];\n  const totalPages = Math.ceil(humanParticipants.length / participantsPerPage);\n\n  // Get current participants for the page\n  const indexOfLastParticipant = currentPage * participantsPerPage;\n  const indexOfFirstParticipant = indexOfLastParticipant - participantsPerPage;\n  const currentParticipants = humanParticipants.slice(indexOfFirstParticipant, indexOfLastParticipant);\n  useEffect(() => {\n    // Connect to the WebSocket\n    socketRef.current = new WebSocket(`ws://localhost:8002/ws/chat/${roomId}/`);\n\n    // Get user media and set up connections\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      streamRef.current = stream;\n      if (userVideo.current) {\n        userVideo.current.srcObject = stream;\n      }\n\n      // Join room\n      joinRoom();\n\n      // Set up WebSocket handlers\n      setupWebSocket();\n\n      // Get participants and messages\n      fetchParticipants();\n      fetchMessages();\n\n      // Generate AI feedback\n      if (aiPartners.length > 0) {\n        generateAIFeedback();\n      }\n    }).catch(error => {\n      console.error(\"Error accessing media devices:\", error);\n      alert(\"Could not access camera or microphone. Please check permissions.\");\n    });\n    return () => {\n      // Clean up\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n      }\n      if (socketRef.current) {\n        socketRef.current.close();\n      }\n      peersRef.current.forEach(peer => {\n        if (peer.peer) {\n          peer.peer.destroy();\n        }\n      });\n    };\n  }, [roomId, aiPartners]);\n  const joinRoom = async () => {\n    try {\n      // Register participant in the room\n      await axios.post(`/api/rooms/${roomId}/join/`, {\n        name: userName,\n        is_ai: false\n      });\n\n      // Register AI partners in the room\n      for (const agent of aiPartners) {\n        await axios.post(`/api/rooms/${roomId}/join/`, {\n          name: agent.name,\n          is_ai: true,\n          ai_agent: agent.id\n        });\n      }\n    } catch (error) {\n      console.error(\"Error joining room:\", error);\n    }\n  };\n  const setupWebSocket = () => {\n    socketRef.current.onopen = () => {\n      console.log(\"WebSocket connection established\");\n\n      // Signal to other participants that we've joined\n      socketRef.current.send(JSON.stringify({\n        type: 'signal',\n        signal: {\n          type: 'new-participant'\n        },\n        caller_id: userName\n      }));\n    };\n    socketRef.current.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'message') {\n        setMessages(prevMessages => [...prevMessages, {\n          sender: data.sender,\n          content: data.message,\n          is_ai: data.is_ai\n        }]);\n\n        // If AI message contains feedback, add it to feedback section\n        if (data.is_ai && data.message_type === 'feedback') {\n          setAiFeedback(prev => [...prev, {\n            agent: data.sender,\n            content: data.message\n          }]);\n        }\n      } else if (data.type === 'signal') {\n        handleSignal(data);\n      }\n    };\n    socketRef.current.onerror = error => {\n      console.error(\"WebSocket error:\", error);\n    };\n    socketRef.current.onclose = () => {\n      console.log(\"WebSocket connection closed\");\n    };\n  };\n  const handleSignal = data => {\n    const {\n      signal,\n      caller_id,\n      receiver_id\n    } = data;\n\n    // If signal is for a new participant\n    if (signal.type === 'new-participant' && caller_id !== userName) {\n      const peer = createPeer(caller_id);\n      peersRef.current.push({\n        peerId: caller_id,\n        peer: peer\n      });\n      socketRef.current.send(JSON.stringify({\n        type: 'signal',\n        signal: {\n          type: 'participant-ready'\n        },\n        caller_id: userName,\n        receiver_id: caller_id\n      }));\n    }\n\n    // If signal is from a participant who is ready to connect\n    else if (signal.type === 'participant-ready' && receiver_id === userName) {\n      const peer = addPeer(caller_id, signal);\n      peersRef.current.push({\n        peerId: caller_id,\n        peer: peer\n      });\n    }\n\n    // Handle WebRTC signaling\n    else if (signal.sdp || signal.candidate) {\n      const item = peersRef.current.find(p => p.peerId === caller_id);\n      if (item) {\n        item.peer.signal(signal);\n      }\n    }\n  };\n  const createPeer = participantId => {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream: streamRef.current\n    });\n    peer.on('signal', signal => {\n      socketRef.current.send(JSON.stringify({\n        type: 'signal',\n        signal: signal,\n        caller_id: userName,\n        receiver_id: participantId\n      }));\n    });\n    peer.on('stream', stream => {\n      setPeers(users => [...users, {\n        id: participantId,\n        stream: stream\n      }]);\n    });\n    return peer;\n  };\n  const addPeer = (participantId, incomingSignal) => {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream: streamRef.current\n    });\n    peer.on('signal', signal => {\n      socketRef.current.send(JSON.stringify({\n        type: 'signal',\n        signal: signal,\n        caller_id: userName,\n        receiver_id: participantId\n      }));\n    });\n    peer.on('stream', stream => {\n      setPeers(users => [...users, {\n        id: participantId,\n        stream: stream\n      }]);\n    });\n    peer.signal(incomingSignal);\n    return peer;\n  };\n  const fetchParticipants = async () => {\n    try {\n      const response = await axios.get(`/api/rooms/${roomId}/participants/`);\n      setParticipants(response.data);\n    } catch (error) {\n      console.error(\"Error fetching participants:\", error);\n    }\n  };\n  const fetchMessages = async () => {\n    try {\n      const response = await axios.get(`/api/rooms/${roomId}/messages/`);\n      setMessages(response.data);\n    } catch (error) {\n      console.error(\"Error fetching messages:\", error);\n    }\n  };\n  const generateAIFeedback = () => {\n    // Simulated AI feedback for demonstration\n    // In a real application, this would come from an AI service\n    const initialFeedback = aiPartners.map(agent => ({\n      agent: agent.name,\n      content: `Hello, I'm ${agent.name}, your ${agent.role} AI assistant. I'm here to help with the meeting.`\n    }));\n    setAiFeedback(initialFeedback);\n\n    // Simulate AI sending periodic feedback\n    const feedbackInterval = setInterval(() => {\n      const randomAgent = aiPartners[Math.floor(Math.random() * aiPartners.length)];\n      if (randomAgent) {\n        const feedback = {\n          agent: randomAgent.name,\n          content: generateRandomFeedback(randomAgent.role)\n        };\n        setAiFeedback(prev => [...prev, feedback]);\n\n        // Also send to chat\n        if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {\n          socketRef.current.send(JSON.stringify({\n            type: 'message',\n            message: feedback.content,\n            sender: feedback.agent,\n            is_ai: true,\n            message_type: 'feedback'\n          }));\n        }\n      }\n    }, 15000); // Every 15 seconds\n\n    return () => clearInterval(feedbackInterval);\n  };\n  const generateRandomFeedback = role => {\n    const feedbackOptions = {\n      'Designer': [\"I notice the UI elements could be more consistent. Consider a unified color scheme.\", \"The user flow seems to have some friction points. We should simplify the navigation.\", \"Visual hierarchy could be improved to guide users more effectively.\", \"Have you considered accessibility in this design? Some elements may need better contrast.\"],\n      'Engineer': [\"The current architecture might have scaling issues with high user loads.\", \"We should consider optimizing the database queries for better performance.\", \"This would be a good opportunity to implement caching to reduce server load.\", \"The current solution works, but we might want to refactor for better maintainability.\"],\n      'Finance': [\"Based on our projections, we should allocate more resources to marketing.\", \"The ROI on this feature seems promising based on current metrics.\", \"We need to consider the cost implications of this infrastructure change.\", \"From a financial perspective, we should prioritize features with higher revenue potential.\"],\n      'Professor': [\"This approach aligns with recent research in the field.\", \"Consider the theoretical implications of this decision framework.\", \"We should examine some case studies that have implemented similar solutions.\", \"The methodology needs more rigorous validation before proceeding.\"]\n    };\n    const options = feedbackOptions[role] || [\"I have some insights to share about this discussion.\"];\n    return options[Math.floor(Math.random() * options.length)];\n  };\n  const toggleVideo = () => {\n    if (streamRef.current) {\n      streamRef.current.getVideoTracks().forEach(track => {\n        track.enabled = !videoEnabled;\n      });\n      setVideoEnabled(!videoEnabled);\n    }\n  };\n  const toggleAudio = () => {\n    if (streamRef.current) {\n      streamRef.current.getAudioTracks().forEach(track => {\n        track.enabled = !audioEnabled;\n      });\n      setAudioEnabled(!audioEnabled);\n    }\n  };\n  const leaveRoom = () => {\n    navigate('/'); // Navigate to home page\n  };\n  const sendMessage = message => {\n    if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {\n      socketRef.current.send(JSON.stringify({\n        type: 'message',\n        message: message,\n        sender: userName,\n        is_ai: false\n      }));\n    }\n  };\n\n  // Pagination controls\n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n  const goToPage = pageNumber => {\n    setCurrentPage(pageNumber);\n  };\n  return /*#__PURE__*/_jsxDEV(VideoRoomContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: /*#__PURE__*/_jsxDEV(RoomTitle, {\n        children: [\"Room \", roomId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ContentContainer, {\n      children: [/*#__PURE__*/_jsxDEV(FeedbackSection, {\n        children: [/*#__PURE__*/_jsxDEV(FeedbackHeader, {\n          children: \"AI Partner Feedback\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 11\n        }, this), aiFeedback.map((feedback, index) => /*#__PURE__*/_jsxDEV(FeedbackItem, {\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `/img/${feedback.agent.toLowerCase()}.png`,\n              alt: feedback.agent,\n              style: {\n                width: '100%',\n                height: '100%',\n                objectFit: 'cover',\n                borderRadius: '50%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FeedbackContent, {\n            children: [/*#__PURE__*/_jsxDEV(AgentName, {\n              children: feedback.agent\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 638,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FeedbackText, {\n              children: feedback.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 15\n          }, this)]\n        }, `feedback-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VideoSection, {\n        children: [/*#__PURE__*/_jsxDEV(VideoGrid, {\n          children: [currentParticipants.map((participant, index) => participant.isCurrentUser ?\n          /*#__PURE__*/\n          // Current user's video (always in top-left)\n          _jsxDEV(VideoContainer, {\n            children: [videoEnabled ? /*#__PURE__*/_jsxDEV(ParticipantVideo, {\n              ref: userVideo,\n              autoPlay: true,\n              playsInline: true,\n              muted: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '100%',\n                height: '100%',\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                backgroundColor: '#333',\n                color: 'white',\n                fontSize: '24px',\n                fontWeight: 'bold'\n              },\n              children: participant.id.charAt(0).toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(ParticipantName, {\n              children: [participant.id, \" (You)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 19\n            }, this)]\n          }, `user-${participant.id}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 17\n          }, this) :\n          /*#__PURE__*/\n          // Peer videos\n          _jsxDEV(VideoContainer, {\n            children: [/*#__PURE__*/_jsxDEV(ParticipantVideo, {\n              autoPlay: true,\n              playsInline: true,\n              ref: element => {\n                if (element && participant.stream) {\n                  element.srcObject = participant.stream;\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(ParticipantName, {\n              children: participant.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 19\n            }, this)]\n          }, `peer-${participant.id}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 17\n          }, this)), Array.from({\n            length: Math.max(0, participantsPerPage - currentParticipants.length)\n          }).map((_, index) => /*#__PURE__*/_jsxDEV(VideoContainer, {\n            style: {\n              backgroundColor: '#f0f0f0'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                height: '100%',\n                color: '#999'\n              },\n              children: \"Empty Slot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 17\n            }, this)\n          }, `empty-${index}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(PaginationControls, {\n          children: [/*#__PURE__*/_jsxDEV(NavButton, {\n            onClick: prevPage,\n            disabled: currentPage === 1,\n            children: \"<\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 15\n          }, this), Array.from({\n            length: totalPages\n          }, (_, i) => i + 1).map(pageNum => /*#__PURE__*/_jsxDEV(PageButton, {\n            active: pageNum === currentPage,\n            onClick: () => goToPage(pageNum),\n            children: pageNum\n          }, `page-${pageNum}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(NavButton, {\n            onClick: nextPage,\n            disabled: currentPage === totalPages,\n            children: \">\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ControlBar, {\n      children: [/*#__PURE__*/_jsxDEV(ChatButton, {\n        onClick: () => setShowChat(!showChat),\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"chat\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n        onClick: toggleAudio,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"microphone\",\n          children: audioEnabled ? '🎙️' : '🔇'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n        onClick: toggleVideo,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"camera\",\n          children: videoEnabled ? '📹' : '🚫'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 748,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n        danger: true,\n        onClick: leaveRoom,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"hang up\",\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 737,\n      columnNumber: 7\n    }, this), showChat && /*#__PURE__*/_jsxDEV(Chat, {\n      messages: messages,\n      onSendMessage: sendMessage,\n      onClose: () => setShowChat(false),\n      roomId: roomId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 760,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 619,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoRoom, \"kqaauhSyqljeSb8WgbjGCBgowLU=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c23 = VideoRoom;\nexport default VideoRoom;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23;\n$RefreshReg$(_c, \"VideoRoomContainer\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"RoomTitle\");\n$RefreshReg$(_c4, \"ContentContainer\");\n$RefreshReg$(_c5, \"FeedbackSection\");\n$RefreshReg$(_c6, \"FeedbackHeader\");\n$RefreshReg$(_c7, \"FeedbackItem\");\n$RefreshReg$(_c8, \"Avatar\");\n$RefreshReg$(_c9, \"FeedbackContent\");\n$RefreshReg$(_c10, \"AgentName\");\n$RefreshReg$(_c11, \"FeedbackText\");\n$RefreshReg$(_c12, \"VideoSection\");\n$RefreshReg$(_c13, \"VideoGrid\");\n$RefreshReg$(_c14, \"VideoContainer\");\n$RefreshReg$(_c15, \"ParticipantVideo\");\n$RefreshReg$(_c16, \"ParticipantName\");\n$RefreshReg$(_c17, \"PaginationControls\");\n$RefreshReg$(_c18, \"PageButton\");\n$RefreshReg$(_c19, \"NavButton\");\n$RefreshReg$(_c20, \"ControlBar\");\n$RefreshReg$(_c21, \"ControlButton\");\n$RefreshReg$(_c22, \"ChatButton\");\n$RefreshReg$(_c23, \"VideoRoom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useLocation","useNavigate","styled","Peer","axios","Chat","jsxDEV","_jsxDEV","VideoRoomContainer","div","_c","Header","_c2","RoomTitle","h2","_c3","ContentContainer","_c4","FeedbackSection","_c5","FeedbackHeader","h3","_c6","FeedbackItem","_c7","Avatar","_c8","AvatarImage","img","FeedbackContent","_c9","AgentName","_c10","FeedbackText","_c11","VideoSection","_c12","VideoGrid","_c13","VideoContainer","_c14","ParticipantVideo","video","_c15","ParticipantName","_c16","PaginationControls","_c17","PageButton","button","props","active","_c18","NavButton","_c19","SelfVideoContainer","visible","ControlBar","_c20","ControlButton","danger","_c21","ChatButton","_c22","VideoRoom","_s","_location$state","roomId","location","navigate","aiPartners","setAiPartners","state","userName","setUserName","localStorage","getItem","peers","setPeers","participants","setParticipants","messages","setMessages","aiFeedback","setAiFeedback","showChat","setShowChat","videoEnabled","setVideoEnabled","audioEnabled","setAudioEnabled","currentPage","setCurrentPage","participantsPerPage","userVideo","peersRef","socketRef","streamRef","humanParticipants","id","isCurrentUser","totalPages","Math","ceil","length","indexOfLastParticipant","indexOfFirstParticipant","currentParticipants","slice","current","WebSocket","navigator","mediaDevices","getUserMedia","audio","then","stream","srcObject","joinRoom","setupWebSocket","fetchParticipants","fetchMessages","generateAIFeedback","catch","error","console","alert","getTracks","forEach","track","stop","close","peer","destroy","post","name","is_ai","agent","ai_agent","onopen","log","send","JSON","stringify","type","signal","caller_id","onmessage","event","data","parse","prevMessages","sender","content","message","message_type","prev","handleSignal","onerror","onclose","receiver_id","createPeer","push","peerId","addPeer","sdp","candidate","item","find","p","participantId","initiator","trickle","on","users","incomingSignal","response","get","initialFeedback","map","role","feedbackInterval","setInterval","randomAgent","floor","random","feedback","generateRandomFeedback","readyState","OPEN","clearInterval","feedbackOptions","options","toggleVideo","getVideoTracks","enabled","toggleAudio","getAudioTracks","leaveRoom","sendMessage","nextPage","prevPage","goToPage","pageNumber","children","fileName","_jsxFileName","lineNumber","columnNumber","index","src","toLowerCase","alt","style","width","height","objectFit","borderRadius","participant","ref","autoPlay","playsInline","muted","display","justifyContent","alignItems","backgroundColor","color","fontSize","fontWeight","charAt","toUpperCase","element","Array","from","max","_","onClick","disabled","i","pageNum","onSendMessage","onClose","_c23","$RefreshReg$"],"sources":["C:/Users/user/OneDrive/桌面/HCI+D/video_app/frontend/src/components/VideoRoom.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport Peer from 'simple-peer';\r\nimport axios from 'axios';\r\nimport Chat from './Chat';\r\n\r\nconst VideoRoomContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  width: 100%;\r\n  position: relative;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n  border-bottom: 1px solid #e0e0e0;\r\n`;\r\n\r\nconst RoomTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n`;\r\n\r\nconst ContentContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1;\r\n  overflow: hidden;\r\n`;\r\n\r\n// AI Feedback Section\r\nconst FeedbackSection = styled.div`\r\n  height: 50%; /* Increased from 40% to 50% */\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n  background-color: #fff;\r\n  border-bottom: 2px solid #2a70e0; // Added visible divider\r\n`;\r\n\r\nconst FeedbackHeader = styled.h3`\r\n  margin: 0 0 16px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #2a70e0;\r\n`;\r\n\r\nconst FeedbackItem = styled.div`\r\n  display: flex;\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst Avatar = styled.div`\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 20px;\r\n  background-color: #e0e0e0;\r\n  margin-right: 12px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst AvatarImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst FeedbackContent = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst AgentName = styled.div`\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  margin-bottom: 4px;\r\n`;\r\n\r\nconst FeedbackText = styled.div`\r\n  font-size: 14px;\r\n`;\r\n\r\n// Human Video Section\r\nconst VideoSection = styled.div`\r\n  height: 50%; \r\n  background-color: #f5f5f5;\r\n  position: relative;\r\n  padding: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\n\r\n\r\nconst VideoGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  grid-template-rows: 1fr 1fr;\r\n  gap: 16px;\r\n  flex: 1;\r\n  position: relative;\r\n`;\r\n\r\nconst VideoContainer = styled.div`\r\n  position: relative;\r\n  aspect-ratio: 4/3;\r\n  background-color: #000;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst ParticipantVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst ParticipantName = styled.div`\r\n  position: absolute;\r\n  bottom: 10px;\r\n  left: 10px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n`;\r\n\r\n// Navigation buttons for pagination\r\nconst PaginationControls = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst PageButton = styled.button`\r\n  background-color: ${props => props.active ? '#2a70e0' : '#f0f0f0'};\r\n  color: ${props => props.active ? 'white' : '#333'};\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  margin: 0 5px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  &:hover {\r\n    background-color: ${props => props.active ? '#2a70e0' : '#d9d9d9'};\r\n  }\r\n`;\r\n\r\nconst NavButton = styled.button`\r\n  background-color: #f0f0f0;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  margin: 0 5px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  &:hover {\r\n    background-color: #d9d9d9;\r\n  }\r\n  \r\n  &:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\n// Self video container\r\nconst SelfVideoContainer = styled.div`\r\n  position: absolute;\r\n  bottom: 70px; // Position above control bar\r\n  right: 10px;\r\n  width: 180px; // Smaller size\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  aspect-ratio: 4/3;\r\n  background-color: #000;\r\n  z-index: 10;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\r\n  display: ${props => props.visible ? 'block' : 'none'}; // Hide when video is off\r\n`;\r\n\r\nconst ControlBar = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 16px;\r\n  background-color: #fff;\r\n  border-top: 1px solid #e0e0e0;\r\n`;\r\n\r\nconst ControlButton = styled.button`\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 20px;\r\n  margin: 0 8px;\r\n  background-color: ${props => props.danger ? '#ff4d4f' : '#f0f0f0'};\r\n  color: ${props => props.danger ? 'white' : 'black'};\r\n  border: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  \r\n  &:hover {\r\n    background-color: ${props => props.danger ? '#ff7875' : '#d9d9d9'};\r\n  }\r\n`;\r\n\r\nconst ChatButton = styled.button`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 20px;\r\n  background-color: #f0f0f0;\r\n  border: none;\r\n  cursor: pointer;\r\n  margin-right: 16px;\r\n  \r\n  &:hover {\r\n    background-color: #d9d9d9;\r\n  }\r\n`;\r\n\r\nconst VideoRoom = () => {\r\n  const { roomId } = useParams();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [aiPartners, setAiPartners] = useState(location.state?.aiPartners || []);\r\n  const [userName, setUserName] = useState(localStorage.getItem('userName') || 'You');\r\n  const [peers, setPeers] = useState([]);\r\n  const [participants, setParticipants] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const [aiFeedback, setAiFeedback] = useState([]);\r\n  const [showChat, setShowChat] = useState(false);\r\n  const [videoEnabled, setVideoEnabled] = useState(true);\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  \r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const participantsPerPage = 4;\r\n  \r\n  const userVideo = useRef();\r\n  const peersRef = useRef([]);\r\n  const socketRef = useRef();\r\n  const streamRef = useRef();\r\n  \r\n  // Put current user first, then other participants\r\n  const humanParticipants = [{ id: userName, isCurrentUser: true }, ...peers];\r\n  const totalPages = Math.ceil(humanParticipants.length / participantsPerPage);\r\n  \r\n  // Get current participants for the page\r\n  const indexOfLastParticipant = currentPage * participantsPerPage;\r\n  const indexOfFirstParticipant = indexOfLastParticipant - participantsPerPage;\r\n  const currentParticipants = humanParticipants.slice(indexOfFirstParticipant, indexOfLastParticipant);\r\n  \r\n  useEffect(() => {\r\n    // Connect to the WebSocket\r\n    socketRef.current = new WebSocket(`ws://localhost:8002/ws/chat/${roomId}/`);\r\n    \r\n    // Get user media and set up connections\r\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n      .then(stream => {\r\n        streamRef.current = stream;\r\n        if (userVideo.current) {\r\n          userVideo.current.srcObject = stream;\r\n        }\r\n        \r\n        // Join room\r\n        joinRoom();\r\n        \r\n        // Set up WebSocket handlers\r\n        setupWebSocket();\r\n        \r\n        // Get participants and messages\r\n        fetchParticipants();\r\n        fetchMessages();\r\n        \r\n        // Generate AI feedback\r\n        if (aiPartners.length > 0) {\r\n          generateAIFeedback();\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error accessing media devices:\", error);\r\n        alert(\"Could not access camera or microphone. Please check permissions.\");\r\n      });\r\n    \r\n    return () => {\r\n      // Clean up\r\n      if (streamRef.current) {\r\n        streamRef.current.getTracks().forEach(track => track.stop());\r\n      }\r\n      if (socketRef.current) {\r\n        socketRef.current.close();\r\n      }\r\n      peersRef.current.forEach(peer => {\r\n        if (peer.peer) {\r\n          peer.peer.destroy();\r\n        }\r\n      });\r\n    };\r\n  }, [roomId, aiPartners]);\r\n  \r\n  const joinRoom = async () => {\r\n    try {\r\n      // Register participant in the room\r\n      await axios.post(`/api/rooms/${roomId}/join/`, {\r\n        name: userName,\r\n        is_ai: false\r\n      });\r\n      \r\n      // Register AI partners in the room\r\n      for (const agent of aiPartners) {\r\n        await axios.post(`/api/rooms/${roomId}/join/`, {\r\n          name: agent.name,\r\n          is_ai: true,\r\n          ai_agent: agent.id\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error joining room:\", error);\r\n    }\r\n  };\r\n  \r\n  const setupWebSocket = () => {\r\n    socketRef.current.onopen = () => {\r\n      console.log(\"WebSocket connection established\");\r\n      \r\n      // Signal to other participants that we've joined\r\n      socketRef.current.send(JSON.stringify({\r\n        type: 'signal',\r\n        signal: { type: 'new-participant' },\r\n        caller_id: userName\r\n      }));\r\n    };\r\n    \r\n    socketRef.current.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      \r\n      if (data.type === 'message') {\r\n        setMessages(prevMessages => [...prevMessages, {\r\n          sender: data.sender,\r\n          content: data.message,\r\n          is_ai: data.is_ai\r\n        }]);\r\n        \r\n        // If AI message contains feedback, add it to feedback section\r\n        if (data.is_ai && data.message_type === 'feedback') {\r\n          setAiFeedback(prev => [...prev, {\r\n            agent: data.sender,\r\n            content: data.message\r\n          }]);\r\n        }\r\n      } else if (data.type === 'signal') {\r\n        handleSignal(data);\r\n      }\r\n    };\r\n    \r\n    socketRef.current.onerror = (error) => {\r\n      console.error(\"WebSocket error:\", error);\r\n    };\r\n    \r\n    socketRef.current.onclose = () => {\r\n      console.log(\"WebSocket connection closed\");\r\n    };\r\n  };\r\n  \r\n  const handleSignal = (data) => {\r\n    const { signal, caller_id, receiver_id } = data;\r\n    \r\n    // If signal is for a new participant\r\n    if (signal.type === 'new-participant' && caller_id !== userName) {\r\n      const peer = createPeer(caller_id);\r\n      \r\n      peersRef.current.push({\r\n        peerId: caller_id,\r\n        peer: peer\r\n      });\r\n      \r\n      socketRef.current.send(JSON.stringify({\r\n        type: 'signal',\r\n        signal: { type: 'participant-ready' },\r\n        caller_id: userName,\r\n        receiver_id: caller_id\r\n      }));\r\n    }\r\n    \r\n    // If signal is from a participant who is ready to connect\r\n    else if (signal.type === 'participant-ready' && receiver_id === userName) {\r\n      const peer = addPeer(caller_id, signal);\r\n      \r\n      peersRef.current.push({\r\n        peerId: caller_id,\r\n        peer: peer\r\n      });\r\n    }\r\n    \r\n    // Handle WebRTC signaling\r\n    else if (signal.sdp || signal.candidate) {\r\n      const item = peersRef.current.find(p => p.peerId === caller_id);\r\n      if (item) {\r\n        item.peer.signal(signal);\r\n      }\r\n    }\r\n  };\r\n  \r\n  const createPeer = (participantId) => {\r\n    const peer = new Peer({\r\n      initiator: true,\r\n      trickle: false,\r\n      stream: streamRef.current\r\n    });\r\n    \r\n    peer.on('signal', signal => {\r\n      socketRef.current.send(JSON.stringify({\r\n        type: 'signal',\r\n        signal: signal,\r\n        caller_id: userName,\r\n        receiver_id: participantId\r\n      }));\r\n    });\r\n    \r\n    peer.on('stream', stream => {\r\n      setPeers(users => [...users, {\r\n        id: participantId,\r\n        stream: stream\r\n      }]);\r\n    });\r\n    \r\n    return peer;\r\n  };\r\n  \r\n  const addPeer = (participantId, incomingSignal) => {\r\n    const peer = new Peer({\r\n      initiator: false,\r\n      trickle: false,\r\n      stream: streamRef.current\r\n    });\r\n    \r\n    peer.on('signal', signal => {\r\n      socketRef.current.send(JSON.stringify({\r\n        type: 'signal',\r\n        signal: signal,\r\n        caller_id: userName,\r\n        receiver_id: participantId\r\n      }));\r\n    });\r\n    \r\n    peer.on('stream', stream => {\r\n      setPeers(users => [...users, {\r\n        id: participantId,\r\n        stream: stream\r\n      }]);\r\n    });\r\n    \r\n    peer.signal(incomingSignal);\r\n    \r\n    return peer;\r\n  };\r\n  \r\n  const fetchParticipants = async () => {\r\n    try {\r\n      const response = await axios.get(`/api/rooms/${roomId}/participants/`);\r\n      setParticipants(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching participants:\", error);\r\n    }\r\n  };\r\n  \r\n  const fetchMessages = async () => {\r\n    try {\r\n      const response = await axios.get(`/api/rooms/${roomId}/messages/`);\r\n      setMessages(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching messages:\", error);\r\n    }\r\n  };\r\n  \r\n  const generateAIFeedback = () => {\r\n    // Simulated AI feedback for demonstration\r\n    // In a real application, this would come from an AI service\r\n    const initialFeedback = aiPartners.map(agent => ({\r\n      agent: agent.name,\r\n      content: `Hello, I'm ${agent.name}, your ${agent.role} AI assistant. I'm here to help with the meeting.`\r\n    }));\r\n    \r\n    setAiFeedback(initialFeedback);\r\n    \r\n    // Simulate AI sending periodic feedback\r\n    const feedbackInterval = setInterval(() => {\r\n      const randomAgent = aiPartners[Math.floor(Math.random() * aiPartners.length)];\r\n      if (randomAgent) {\r\n        const feedback = {\r\n          agent: randomAgent.name,\r\n          content: generateRandomFeedback(randomAgent.role)\r\n        };\r\n        \r\n        setAiFeedback(prev => [...prev, feedback]);\r\n        \r\n        // Also send to chat\r\n        if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {\r\n          socketRef.current.send(JSON.stringify({\r\n            type: 'message',\r\n            message: feedback.content,\r\n            sender: feedback.agent,\r\n            is_ai: true,\r\n            message_type: 'feedback'\r\n          }));\r\n        }\r\n      }\r\n    }, 15000); // Every 15 seconds\r\n    \r\n    return () => clearInterval(feedbackInterval);\r\n  };\r\n  \r\n  const generateRandomFeedback = (role) => {\r\n    const feedbackOptions = {\r\n      'Designer': [\r\n        \"I notice the UI elements could be more consistent. Consider a unified color scheme.\",\r\n        \"The user flow seems to have some friction points. We should simplify the navigation.\",\r\n        \"Visual hierarchy could be improved to guide users more effectively.\",\r\n        \"Have you considered accessibility in this design? Some elements may need better contrast.\"\r\n      ],\r\n      'Engineer': [\r\n        \"The current architecture might have scaling issues with high user loads.\",\r\n        \"We should consider optimizing the database queries for better performance.\",\r\n        \"This would be a good opportunity to implement caching to reduce server load.\",\r\n        \"The current solution works, but we might want to refactor for better maintainability.\"\r\n      ],\r\n      'Finance': [\r\n        \"Based on our projections, we should allocate more resources to marketing.\",\r\n        \"The ROI on this feature seems promising based on current metrics.\",\r\n        \"We need to consider the cost implications of this infrastructure change.\",\r\n        \"From a financial perspective, we should prioritize features with higher revenue potential.\"\r\n      ],\r\n      'Professor': [\r\n        \"This approach aligns with recent research in the field.\",\r\n        \"Consider the theoretical implications of this decision framework.\",\r\n        \"We should examine some case studies that have implemented similar solutions.\",\r\n        \"The methodology needs more rigorous validation before proceeding.\"\r\n      ]\r\n    };\r\n    \r\n    const options = feedbackOptions[role] || [\"I have some insights to share about this discussion.\"];\r\n    return options[Math.floor(Math.random() * options.length)];\r\n  };\r\n  \r\n  const toggleVideo = () => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getVideoTracks().forEach(track => {\r\n        track.enabled = !videoEnabled;\r\n      });\r\n      setVideoEnabled(!videoEnabled);\r\n    }\r\n  };\r\n  \r\n  const toggleAudio = () => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getAudioTracks().forEach(track => {\r\n        track.enabled = !audioEnabled;\r\n      });\r\n      setAudioEnabled(!audioEnabled);\r\n    }\r\n  };\r\n  \r\n  const leaveRoom = () => {\r\n    navigate('/'); // Navigate to home page\r\n  };\r\n  \r\n  const sendMessage = (message) => {\r\n    if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {\r\n      socketRef.current.send(JSON.stringify({\r\n        type: 'message',\r\n        message: message,\r\n        sender: userName,\r\n        is_ai: false\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Pagination controls\r\n  const nextPage = () => {\r\n    if (currentPage < totalPages) {\r\n      setCurrentPage(currentPage + 1);\r\n    }\r\n  };\r\n\r\n  const prevPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage(currentPage - 1);\r\n    }\r\n  };\r\n\r\n  const goToPage = (pageNumber) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n  \r\n  return (\r\n    <VideoRoomContainer>\r\n      <Header>\r\n        <RoomTitle>Room {roomId}</RoomTitle>\r\n      </Header>\r\n      \r\n      <ContentContainer>\r\n        {/* AI Feedback Section */}\r\n        <FeedbackSection>\r\n          <FeedbackHeader>AI Partner Feedback</FeedbackHeader>\r\n          {aiFeedback.map((feedback, index) => (\r\n            <FeedbackItem key={`feedback-${index}`}>\r\n              <Avatar>\r\n                <img \r\n                  src={`/img/${feedback.agent.toLowerCase()}.png`} \r\n                  alt={feedback.agent} \r\n                  style={{ width: '100%', height: '100%', objectFit: 'cover', borderRadius: '50%' }} \r\n                />\r\n              </Avatar>\r\n              <FeedbackContent>\r\n                <AgentName>{feedback.agent}</AgentName>\r\n                <FeedbackText>{feedback.content}</FeedbackText>\r\n              </FeedbackContent>\r\n            </FeedbackItem>\r\n          ))}\r\n        </FeedbackSection>\r\n        \r\n        {/* Human Video Section */}\r\n        <VideoSection>\r\n          \r\n          <VideoGrid>\r\n            {currentParticipants.map((participant, index) => (\r\n              participant.isCurrentUser ? (\r\n                // Current user's video (always in top-left)\r\n                <VideoContainer key={`user-${participant.id}`}>\r\n                  {videoEnabled ? (\r\n                    <ParticipantVideo \r\n                      ref={userVideo} \r\n                      autoPlay \r\n                      playsInline \r\n                      muted\r\n                    />\r\n                  ) : (\r\n                    <div style={{ \r\n                      width: '100%', \r\n                      height: '100%', \r\n                      display: 'flex', \r\n                      justifyContent: 'center', \r\n                      alignItems: 'center',\r\n                      backgroundColor: '#333',\r\n                      color: 'white',\r\n                      fontSize: '24px',\r\n                      fontWeight: 'bold'\r\n                    }}>\r\n                      {participant.id.charAt(0).toUpperCase()}\r\n                    </div>\r\n                  )}\r\n                  <ParticipantName>{participant.id} (You)</ParticipantName>\r\n                </VideoContainer>\r\n              ) : (\r\n                // Peer videos\r\n                <VideoContainer key={`peer-${participant.id}`}>\r\n                  <ParticipantVideo\r\n                    autoPlay\r\n                    playsInline\r\n                    ref={(element) => {\r\n                      if (element && participant.stream) {\r\n                        element.srcObject = participant.stream;\r\n                      }\r\n                    }}\r\n                  />\r\n                  <ParticipantName>{participant.id}</ParticipantName>\r\n                </VideoContainer>\r\n              )\r\n            ))}\r\n\r\n            {/* Fill empty slots with placeholders if fewer than 4 participants */}\r\n            {Array.from({ length: Math.max(0, participantsPerPage - currentParticipants.length) }).map((_, index) => (\r\n              <VideoContainer key={`empty-${index}`} style={{ backgroundColor: '#f0f0f0' }}>\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'center', \r\n                  alignItems: 'center', \r\n                  height: '100%',\r\n                  color: '#999' \r\n                }}>\r\n                  Empty Slot\r\n                </div>\r\n              </VideoContainer>\r\n            ))}\r\n          </VideoGrid>\r\n          \r\n          {/* Pagination controls - only show if totalPages > 1 */}\r\n          {totalPages > 1 && (\r\n            <PaginationControls>\r\n              <NavButton onClick={prevPage} disabled={currentPage === 1}>\r\n                &lt;\r\n              </NavButton>\r\n              \r\n              {Array.from({ length: totalPages }, (_, i) => i + 1).map(pageNum => (\r\n                <PageButton \r\n                  key={`page-${pageNum}`} \r\n                  active={pageNum === currentPage}\r\n                  onClick={() => goToPage(pageNum)}\r\n                >\r\n                  {pageNum}\r\n                </PageButton>\r\n              ))}\r\n              \r\n              <NavButton onClick={nextPage} disabled={currentPage === totalPages}>\r\n                &gt;\r\n              </NavButton>\r\n            </PaginationControls>\r\n          )}\r\n          \r\n          {/* Removed the floating SelfVideo container as we're showing the user in the grid */}\r\n        </VideoSection>\r\n      </ContentContainer>\r\n      \r\n      <ControlBar>\r\n        <ChatButton onClick={() => setShowChat(!showChat)}>\r\n          <span role=\"img\" aria-label=\"chat\">💬</span>\r\n        </ChatButton>\r\n        \r\n        <ControlButton onClick={toggleAudio}>\r\n          <span role=\"img\" aria-label=\"microphone\">\r\n            {audioEnabled ? '🎙️' : '🔇'}\r\n          </span>\r\n        </ControlButton>\r\n        \r\n        <ControlButton onClick={toggleVideo}>\r\n          <span role=\"img\" aria-label=\"camera\">\r\n            {videoEnabled ? '📹' : '🚫'}\r\n          </span>\r\n        </ControlButton>\r\n        \r\n        <ControlButton danger onClick={leaveRoom}>\r\n          <span role=\"img\" aria-label=\"hang up\">❌</span>\r\n        </ControlButton>\r\n      </ControlBar>\r\n      \r\n      {showChat && (\r\n        <Chat \r\n          messages={messages} \r\n          onSendMessage={sendMessage} \r\n          onClose={() => setShowChat(false)}\r\n          roomId={roomId}\r\n        />\r\n      )}\r\n    </VideoRoomContainer>\r\n  );\r\n};\r\n\r\nexport default VideoRoom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}